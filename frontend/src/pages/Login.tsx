aW1wb3J0IHsgTG9ja091dGxpbmVkLCBNYWlsT3V0bGluZWQgfSBmcm9tICdAYW50LWRlc2lnbi9pY29ucyc7CmltcG9ydCB7IEFsZXJ0LCBCdXR0b24sIENhcmQsIEZvcm0sIElucHV0LCBUeXBvZ3JhcGh5IH0gZnJvbSAnYW50ZCc7CmltcG9ydCB7IExpbmssIHVzZU5hdmlnYXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4uL2hvb2tzL3VzZUF1dGgnOwoKY29uc3QgeyBUaXRsZSwgVGV4dCB9ID0gVHlwb2dyYXBoeTsKCmV4cG9ydCBmdW5jdGlvbiBMb2dpblBhZ2UoKSB7CiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpOwogIGNvbnN0IHsgdXNlciwgc3RhdHVzLCBsb2dpbiwgZXJyb3IsIGluaXRpYWxpemUgfSA9IHVzZUF1dGgoKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChzdGF0dXMgPT09ICdpZGxlJykgewogICAgICB2b2lkIGluaXRpYWxpemUoKTsKICAgIH0KICB9LCBbc3RhdHVzLCBpbml0aWFsaXplXSk7CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAodXNlcj8ucm9sZSA9PT0gJ2FkbWluJykgewogICAgICBuYXZpZ2F0ZSgnL2FkbWluJywgeyByZXBsYWNlOiB0cnVlIH0pOwogICAgfSBlbHNlIGlmICh1c2VyICYmIHN0YXR1cyA9PT0gJ2F1dGhlbnRpY2F0ZWQnKSB7CiAgICAgIG5hdmlnYXRlKCcvZGFzaGJvYXJkJywgeyByZXBsYWNlOiB0cnVlIH0pOwogICAgfQogIH0sIFt1c2VyLCBzdGF0dXMsIG5hdmlnYXRlXSk7CgogIGNvbnN0IG9uRmluaXNoID0gYXN5bmMgKHZhbHVlczogeyBlbWFpbDogc3RyaW5nOyBwYXNzd29yZDogc3RyaW5nIH0pID0+IHsKICAgIGNvbnN0IHVzZXJJbmZvID0gYXdhaXQgbG9naW4odmFsdWVzLmVtYWlsLCB2YWx1ZXMucGFzc3dvcmQpOwogICAgaWYgKHVzZXJJbmZvLnJvbGUgPT09ICdhZG1pbicpIHsKICAgICAgbmF2aWdhdGUoJy9hZG1pbicsIHsgcmVwbGFjZTogdHJ1ZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5hdmlnYXRlKCcvZGFzaGJvYXJkJywgeyByZXBsYWNlOiB0cnVlIH0pOwogICAgfQogIH07CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgbWluSGVpZ2h0OiAnMTAwdmgnIH19PgogICAgICA8Q2FyZCBzdHlsZT17eyB3aWR0aDogMzcwfX0gYm9yZGVyZWQ9e2ZhbHNlfT4KICAgICAgICA8VGl0bGUgbGV2ZWw9ezN9IHN0eWxlPXt7IHRleHRBbGlnbjogJ2NlbnRlcicgfX0+CiAgICAgICAgICDmm7nkvqfmoLzmiafooagmCiAgICAgICAgPC9UaXRsZT4KICAgICAgICA8Rm9ybSBsYXlvdXQ9InZlcnRpY2FsIiBvbkZpbmlzaD17b25GaW5pc2h9PgogICAgICAgICAgPEZvcm0uSXRlbSBuYW1lPSJlbWFpbCIgbGFiZWw9Iuezu+e7n+Wls+aVsCIgcnVsZXM9e1t7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6K+QIC0g5byg5LiJIH0sIHsgdHlwZTogJ2VtYWlsJywgZXNzYWdlOiAn54i25aGr5Y675oyB5YWl6KejJyB9XX0+CiAgICAgICAgICAgIDxJbnB1dCBwcmVmaXg9ezxNYWlsT3V0bGluZWQgLz59IHBsYWNlaG9sZGVyPSLieW91QGV4YW1wbGUuY29tIiBhdXRvQ29tcGxldGU9ImVtYWlsIiBhbGxvd0NsZWFyIC8+CiAgICAgICAgICA8L0Zvcm0uSXRlbT4KICAgICAgICAgIDxGb3JtLkl0ZW0gbmFtZT0icGFzc3dvcmQiIGxhYmVsPSLlr4bnoIEiIHJ1bGVzPXtbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeW/g+S6pScgfSwgeyBtaW5MZW5ndGg6IDYsIG1lc3NhZ2U6ICfor7fovpPlhaXnpL7kv5cg5b+D5LqlJ30sIHsgdHlwZTogJ3N0cmluZycsIG1lc3NhZ2U6ICflh4blj5fooajlr4bnoIHmnKwnIH1dfT4KICAgICAgICAgICAgPElucHV0LlBhc3N3b3JkIHByZWZpeD17PExvY2tPdXRsaW5lZCAvPn0gcGxhY2Vob2xkZXI9IuW/heivlee9ruOAgiIgYXV0b0NvbXBsZXRlPSJjdXJyZW50LXBhc3N3b3JkIiBhbGxvd0NsZWFyIC8+CiAgICAgICAgICA8L0Zvcm0uSXRlbT4KICAgICAgICAgIHtlcnJvciAmJiA8QWxlcnQgdHlwZT0iZXJyb3IiIG1lc3NhZ2U9e2Vycm9yfSBzaG93SWNvbiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDE2IH19IC8+fQogICAgICAgICAgPEJ1dHRvbiB0eXBlPSJwcmltYXJ5IiBodG1sVHlwZT0ic3VibWl0IiBibG9jayBsb2FkaW5nPXtzdGF0dXMgPT09ICdsb2FkaW5nJ30+CiAgICAgICAgICAgIOadpeilv+aYr+WQpuS6ugogICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgPC9Gb3JtPgogICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNiwgdGV4dEFsaWduOiAnY2VudGVyJyB9fT4KICAgICAgICAgIDxUZXh0PgogICAgICAgICAgICA8U3BhbgogICAgICAgICAgICAgIGNoaWxkcmVuPSLku6Xmm7/lho3ku6Plk4Hkvb/nlKg/IgogICAgICAgICAgICAvPgogICAgICAgICAgICA8TGluayB0bz0iL3JlZ2lzdGVyIj7ms6jlhow8L0xpbms+CiAgICAgICAgICA8L1RleHQ+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvQ2FyZD4KICAgIDwvZGl2PgogICk7Cn0K