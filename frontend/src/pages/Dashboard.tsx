import { LogoutOutlined, RocketOutlined, SettingOutlined } from '@ant-design/icons';
import { Alert, Button, Card, Layout, Space, Spin, Typography } from 'antd';
import { useEffect, useMemo, useState } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { api } from '../lib/api';
import { useAuth } from '../hooks/useAuth';
import { extractErrorMessage } from '../utils/error';

const { Header, Content } = Layout;
const { Title, Text } = Typography;

interface SessionLink {
  slug: string;
  license_id: string;
  is_active: boolean;
  last_seen?: string;
  total_runtime_seconds: number;
}

export function DashboardPage() {
  const navigate = useNavigate();
  const { user, logout } = useAuth();
  const [sessionLink, setSessionLink] = useState<SessionLink | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | undefined>();
  const baseUrl = useMemo(() => (typeof window !== 'undefined' ? window.location.origin : ''), []);

  useEffect(() => {
    if (user?.role === 'admin') {
      navigate('/admin', { replace: true });
    }
  }, [user, navigate]);

  if (!user) {
    return (
      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '100vh' }}>
        <Spin tip="加载中..." />
      </div>
    );
  }

  const handleGetSession = async () => {
    setLoading(true);
    setError(undefined);
    try {
      const { data } = await api.ensureSessionLink();
      setSessionLink(data);
    } catch (err) {
      setError(extractErrorMessage(err, '获取授权信息失败，请联系管理员。'));
    } finally {
      setLoading(false);
    }
  };

  return (
    <Layout>
      <Header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
        <Title level={4} style={{ color: '#fff', margin: 0 }}>
          ClaudeCode 控制台
        </Title>
        <Space>
          <Text>{user.email}</Text>
          {user.role === 'admin' && (
            <Button icon={<SettingOutlined />} onClick={() => navigate('/admin')}>
              管理后台
            </Button>
          )}
          <Button icon={<LogoutOutlined />} onClick={() => logout()}>
            退出
          </Button>
        </Space>
      </Header>
      <Content style={{ padding: '48px 24px', display: 'flex', justifyContent: 'center' }}>
        <Card style={{ width: 620 }}>
          <Space direction="vertical" size="large" style={{ width: '100%' }}>
            <div>
              <Title level={4}>欢迎回来</Title>
              <Text type="secondary">您可以在授权期内使用 Claude Code 云端工作区。</Text>
            </div>
            {error && <Alert type="error" message={error} showIcon />}
            {sessionLink ? (
              <Alert
                message="授权链接已准备"
                description={
                  <Space direction="vertical">
                    <Text>{`${baseUrl}/${sessionLink.slug}`}</Text>
                    <Link to={`/session/${sessionLink.slug}`}>
                      <Button type="primary" icon={<RocketOutlined />}>立即进入工作区</Button>
                    </Link>
                  </Space>
                }
                type="success"
                showIcon
              />
            ) : (
              <Button type="primary" icon={<RocketOutlined />} size="large" loading={loading} onClick={handleGetSession}>
                获取 ClaudeCode 链接
              </Button>
            )}
          </Space>
        </Card>
      </Content>
    </Layout>
  );
}
